<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>COVID-19</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0; }
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<div id="map"></div>
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoibHVpc2hhd2tpbnMiLCJhIjoiY2s4cmoxZXdrMGY2MDNscTh0YzhiYTlmeSJ9.IOCvVYioPfu2bb6I6vTsgA';
var map = new mapboxgl.Map({
container: 'map', // container id
style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
center: [0, 0], // starting position [lng, lat]
zoom: 3 // starting zoom
})
    renderData()
    async function getData() {
        const response = await fetch('https://wuhan-coronavirus-api.laeyoung.endpoint.ainize.ai/jhu-edu/latest')
        const data = await response.json()
        
        return data
    }
            
            
            
           // var el = document.createElement('div');
            //el.id = 'marker';
      async function renderData() {
                const data = await getData()
                console.log(data)
                data.forEach(item => {
                //console.log(item)
                var Popup = new mapboxgl.Popup({map,marker})
            .setText('hola.'
            );
            var marker = new mapboxgl.Marker()
                .setLngLat([item.location.lng,item.location.lat])
                .setPopup(Popup)
                .addTo(map);
                //.setLngLat([item.location.lng,item.location.lat])
            //var popup = new mapboxgl.Popup()
            
                //.setLngLat(marker)
                //.setHTML('Hello ')
                

           });    
            
            //.addTo(map);    
       

        } 

             
        
        
        //data.forEach(item => {
            //var marker = new mapboxgl.Marker(el, { offset: [0, -23] })
            //.setLngLat(marker.geometry.coordinates)
            //.setLngLat(item.location.lat)
            //.addTo(map);
            //.setLngLat([
           // lat (item,location,lat),
           // lng (item,location,lat)
           // ])
            //.addTo(map);        })
   

</script>
 
</body>
</html>